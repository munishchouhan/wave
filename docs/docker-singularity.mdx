---
title: Docker and Singularity
---

## Docker containers

Wave supports building and provisioning containers using Docker. Container images generated by Wave are fully compatible with standard Docker clients, as well as any container runtime that adheres to the [Docker registry v2 API](https://docs.docker.com/registry/spec/api/) specification.

Wave leverages Docker to ensure broad compatibility across containerized environments. Docker images built through Wave can be deployed directly with container runtimes, including:

- Docker
- Podman
- Saurus
- Charliecloud
- Shifter

This compatibility allows seamless integration with existing container workflows and infrastructure.

## Singularity containers

Singularity and Apptainer utilize a proprietary container format known as the Singularity Image Format (SIF). Wave supports the provisioning of containers in SIF format using either a Singularityfile or a conda environment specification.

SIF images produced by Wave are stored as OCI Registry as Storage (ORAS) artifacts. These artifacts can be published to the Wave Community registry or to any user-defined OCI-compliant container registry.

Unlike workflows that use Docker images with Singularity or Apptainer engines, Wave removes the need for image conversion. Containers are provisioned directly in SIF format, streamlining deployment.

:::note
Wave's freeze mode must be used when provisioning Singularity images to account for SIF peculiarities.
:::

### The ORAS protocol

Wave leverages the [OCI Registry as Storage (ORAS)](https://oras.land/) protocol to efficiently manage and distribute SIF containers. ORAS enables SIF images to be stored in OCI-compliant registries, enabling seamless interoperability with container ecosystems.
This approach simplifies image sharing, ensures compatibility with modern cloud and pipeline infrastructure, and makes it easier to use Singularity alongside Docker and other container technologies.

Advantages of using ORAS with Nextflow:

- Improved resource utilization: Singularity pulls container images within the individual process task rather than in the Nextflow head job. This reduces resource requirements and improves parallelization across tasks.
- Private registry access: Singularity supports authenticated pulls from private registries, enhancing security and flexibility. See [Singularity registry](https://docs.sylabs.io/guides/main/user-guide/cli/singularity_registry.html) for more information.

Considerations and limitations:

- **Shared cache limitations**: Shared cache Nextflow options, such as `$NXF_SINGULARITY_CACHEDIR` and `$NXF_SINGULARITY_LIBRARYDIR`, are not utilized when using ORAS-based image distribution.
- **Offline image availability**: Singularity must be installed locally to download and use images in offline environments.
- **Version compatibility**: `oras://` is only supported by recent versions of Singularity and Apptainer

:::note
Wave can also use `https` to download Singularity images.
<!-- // TODO add See Singularity https downloads for more information. -->
:::

<!--
// TODO Add read more secton
-->
